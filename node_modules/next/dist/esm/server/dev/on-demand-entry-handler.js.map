{"version":3,"sources":["../../../src/server/dev/on-demand-entry-handler.ts"],"names":["createDebug","EventEmitter","findPageFile","getStaticInfoIncludingLayouts","runDependingOnPageType","join","posix","normalizePathSep","normalizePagePath","ensureLeadingSlash","removePagePathTail","reportTrigger","getRouteFromEntrypoint","isInstrumentationHookFile","isInstrumentationHookFilename","isMiddlewareFile","isMiddlewareFilename","PageNotFoundError","stringifyError","COMPILER_INDEXES","COMPILER_NAMES","RSC_MODULE_TYPES","HMR_ACTIONS_SENT_TO_BROWSER","isAppPageRouteDefinition","scheduleOnNextTick","Batcher","debug","keys","Object","COMPILER_KEYS","treePathToEntrypoint","segmentPath","parentPath","parallelRouteKey","segment","path","startsWith","length","childSegmentPath","slice","convertDynamicParamTypeToSyntax","dynamicParamTypeShort","param","Error","getEntryKey","compilerType","pageBundleType","page","pageKey","replace","getPageBundleType","pageBundlePath","getEntrypointsFromTree","tree","isFirst","parallelRoutes","currentSegment","Array","isArray","isPageSegment","currentPath","reduce","paths","key","childTree","childPages","ADDED","Symbol","BUILDING","BUILT","EntryTypes","ENTRY","CHILD_ENTRY","entriesMap","Map","normalizeOutputPath","dir","getEntries","entries","get","set","invalidators","getInvalidator","doneCallbacks","lastClientAccessPages","lastServerAccessPagesForAppDir","Invalidator","constructor","multiCompiler","building","Set","rebuildAgain","shouldRebuildAll","size","invalidate","compilerKeys","has","add","compilers","watching","startBuilding","compilerKey","doneBuilding","rebuild","delete","push","willRebuild","disposeInactiveEntries","maxInactiveAge","forEach","entryKey","entryData","lastActiveTime","status","dispose","bundlePath","type","includes","Date","now","tryToNormalizePagePath","err","console","error","findPagePathData","rootDir","extensions","pagesDir","appDir","normalizedPagePath","pagePath","isInstrumentation","pageUrl","normalize","filename","keepIndex","require","resolve","onDemandEntryHandler","hotReloader","nextConfig","pagesBufferLength","curInvalidator","outputPath","curEntries","compilation","compilationName","name","compiler","hooks","make","tap","getPagePathsFromEntrypoints","entrypoints","root","pagePaths","entrypoint","values","done","multiStats","clientStats","serverStats","edgeServerStats","stats","entryNames","client","server","edgeServer","entry","emit","pingIntervalTime","Math","max","min","setInterval","unref","handleAppDirPing","pages","entryInfo","unshift","pop","handlePing","pg","ensurePageImpl","clientOnly","appPaths","definition","isApp","stalledTime","stalledEnsureTimeout","setTimeout","route","pageExtensions","isInsideAppDir","stackTraceLimit","addEntry","newEntry","shouldInvalidate","absolutePagePath","request","staticInfo","pageFilePath","isDev","config","added","isServerComponent","rsc","pageRuntime","runtime","pageType","onClient","onServer","edgeServerEntry","onEdgeServer","serverEntry","addedValues","entriesThatShouldBeInvalidated","filter","hasNewEntry","some","invalidatePromise","Promise","all","map","reject","once","needsRebuild","rebuildErr","clearTimeout","batcher","create","cacheKeyFn","options","JSON","stringify","schedulerFn","ensurePage","batch","onHMR","getHmrServerError","bufferedHmrServerError","addEventListener","data","send","action","SERVER_ERROR","errorJSON","parsedData","parse","toString","event","appDirRoute"],"mappings":"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"}